# Command Executor v0.1

Инструмент для выполнения SSH команд с графическим и консольным интерфейсами.

## Основные возможности

- **Группировка**: Хосты автоматически группируются по первому символу с естественной сортировкой
- **Централизованная конфигурация**: Все настройки вынесены в config.py
- **--help**: Поддержка параметров с --help
- **Префиксы**: Фильтрация хостов по префиксу
- **Чекбоксы**: Выбор отдельных хостов или целых групп
- **GUI версия**: Графический интерфейс
- **CLI версия**: Консольный интерфейс
- **Автоматический fallback**: GUI → CLI при отсутствии tkinter
- **Массовое выполнение**: Команды на множестве хостов одновременно
- **Информация о хостах**: Просмотр конфигурации SSH для каждого хоста по очереди
- **Тест подключения**: Проверка доступности хостов

## Возможности GUI

- Чекбоксы для выбора хостов и групп
- Группировка хостов по алфавиту с естественной сортировкой  
- Фильтрация по префиксу с кнопкой очистки
- Кнопки "Выбрать все" / "Снять выбор"
- Кнопки "Развернуть все" / "Свернуть все" группы
- Контекстное меню (правый клик)
- Информация о хостах (двойной клик)
- Выполнение команд с sudo
- Подробный/краткий вывод результатов

## Запуск

### Основные команды

```bash
# Автоматический выбор интерфейса (GUI или CLI)
python3 app/main.py

# Принудительный запуск GUI
python3 app/main.py --gui

# Принудительный запуск CLI
python3 app/main.py --cli

# Полная справка по всем параметрам
python3 app/main.py --help

# Запуск через shell-скрипт (GUI)
./app/run_gui.sh
```

### Команды с параметрами

```bash
# Фильтрация хостов по префиксу
python3 app/main.py --prefix web
python3 app/main.py -p prod

# Использование другого SSH config
python3 app/main.py --config ~/.ssh/production

# Настройки тайм-аутов
python3 app/main.py --timeout 60 --connect-timeout 5

# Подробный вывод и отладка
python3 app/main.py --verbose --debug

# Комбинированные команды
python3 app/main.py --gui --prefix f --verbose
python3 app/main.py --cli --config ~/.ssh/test --debug
```

### Диагностические команды

```bash
# Проверка SSH конфигурации
python3 app/main.py --test-config

# Показать все доступные хосты
python3 app/main.py --list-hosts

# Показать хосты с префиксом
python3 app/main.py --list-hosts --prefix web

# Версия приложения
python3 app/main.py --version
```

## Использование

### GUI версия

1. Запустите `python3 app/main.py` или `python3 app/main.py --gui`
2. Введите префикс в поле "Префикс" (или оставьте пустым для всех хостов)
3. Нажмите "Загрузить" или "Очистить"
4. Выберите хосты с помощью чекбоксов (отдельные хосты или целые группы)
5. Введите команду для выполнения
6. Настройте опции: sudo, подробный вывод
7. Нажмите "Выполнить команду"

### CLI версия

1. Запустите `python3 app/main.py --cli`
2. Введите префикс при запросе (или Enter для всех хостов)
3. Выберите действие из меню
4. Следуйте инструкциям для выполнения команд

### Управление хостами

- **Чекбоксы хостов**: Клик по чекбоксу выбирает/снимает выбор хоста
- **Чекбоксы групп**: Клик выбирает/снимает всю группу
- **Двойной клик**: Показывает информацию о хосте
- **Правый клик**: Контекстное меню с дополнительными действиями
- **Сворачивание групп**: Кнопки "Развернуть все" / "Свернуть все"

## Конфигурация

Все настройки находятся в файле `config.py`:

- **GUI настройки**: размеры окна, шрифты, цвета
- **SSH параметры**: тайм-ауты, пути к конфигурации
- **Символы интерфейса**: чекбоксы
- **Сообщения**: тексты уведомлений
- **Значения по умолчанию**: начальные настройки

Для изменения настроек отредактируйте соответствующие значения в `config.py`.

## Архитектура проекта

- `main.py` - Главная точка входа с поддержкой аргументов командной строки
- `config.py` - Централизованная конфигурация всех настроек *(НОВЫЙ)*
- `cli_args.py` - Обработка аргументов командной строки *(НОВЫЙ)*
- `command_executor_gui_app.py` - реализация графического интерфейса (используется `main.py`)
- `command_executor_cli_app.py` - реализация консольного интерфейса (используется `main.py`)
- `ssh_config_parser.py` - Парсер SSH конфигурации с группировкой
- `ssh_executor.py` - Выполнение SSH команд и тестирование подключений
- `run_gui.sh` - Скрипт автоматического запуска
- `README.md` - Документация по использованию
- `CHANGES.md` - Журнал изменений и резюме обновлений (см. ниже)

## Примеры использования

```bash
# Быстрый старт
python3 app/main.py

# Работа с конкретными хостами
python3 app/main.py --prefix web --gui

# Отладка проблем
python3 app/main.py --debug --test-config

# Массовая работа
python3 app/main.py --cli --prefix prod --verbose
```

## Требования

- Python 3.6+
- tkinter (для GUI, обычно входит в состав Python)
- SSH клиент (openssh-client)
- Доступ к ~/.ssh/config или указанному конфигурационному файлу

---

**Command Executor** - Профессиональный инструмент для управления SSH подключениями

